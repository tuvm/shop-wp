!function(e,t,i){"use strict";e.fn.yit_infinitescroll=function(n){var r=e.extend({nextSelector:!1,navSelector:!1,itemSelector:!1,contentSelector:!1,maxPage:!1,loader:!1,is_shop:!1},n),l=!1,o=!1,s=e(r.nextSelector).attr("href");e(r.nextSelector).length&&e(r.navSelector).length&&e(r.itemSelector).length&&e(r.contentSelector).length?e(r.navSelector).hide():o=!0;var a=e(r.contentSelector).find(r.itemSelector).first().nextUntil(".first",r.itemSelector).length+1,c=function(){var t=e(r.contentSelector).find(r.itemSelector).last();r.loader&&e(r.navSelector).after('<div class="yith-infs-loader">'+r.loader+"</div>"),l=!0,s=decodeURIComponent(s),s=s.replace(/^(?:\/\/|[^\/]+)*\//,"/"),e.ajax({url:s,dataType:"html",cache:!1,success:function(n){var c=e(n),h=c.find(r.itemSelector),d=c.find(r.nextSelector),m=s;d.length?s=d.attr("href"):(o=!0,e(i).trigger("yith-infs-scroll-finished")),!t.hasClass("last")&&r.is_shop&&f(t,a,h),t.after(h),e(".yith-infs-loader").remove(),e(i).trigger("yith_infs_adding_elem",[h,m]),h.addClass("yith-infs-animated"),setTimeout(function(){l=!1,h.removeClass("yith-infs-animated"),e(i).trigger("yith_infs_added_elem",[h,m])},1e3)}})},f=function(t,i,n){var l=i-t.prevUntil(".last",r.itemSelector).length,o=0;n.each(function(){var t=e(this);o++,t.removeClass("first"),t.removeClass("last"),(o-l)%i==0?t.addClass("first"):(o-(l-1))%i==0&&t.addClass("last")})};e(t).on("scroll touchstart",function(){e(this).trigger("yith_infs_start")}),e(t).on("yith_infs_start",function(){var t=e(this),i=e(r.itemSelector).last();void 0!==i&&!l&&!o&&t.scrollTop()+t.height()>=i.offset().top+i.height()&&c()})}}(jQuery,window,document);